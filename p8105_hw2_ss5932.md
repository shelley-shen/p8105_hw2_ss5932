Homework 2
================
Shelley Shen
09/26/2020

``` r
library(tidyverse)
```

    ## -- Attaching packages ------------------------------------------------------------------------------------------------------------------------ tidyverse 1.3.0 --

    ## v ggplot2 3.3.2     v purrr   0.3.4
    ## v tibble  3.0.3     v dplyr   1.0.2
    ## v tidyr   1.1.2     v stringr 1.4.0
    ## v readr   1.3.1     v forcats 0.5.0

    ## -- Conflicts --------------------------------------------------------------------------------------------------------------------------- tidyverse_conflicts() --
    ## x dplyr::filter() masks stats::filter()
    ## x dplyr::lag()    masks stats::lag()

``` r
library(readxl)
library(dplyr)
library(readr)
```

## Problem 1: Mr. Trash Wheel

Read and clean the Mr. Trash Wheel sheet.

``` r
trashwheel_df = 
  read_xlsx("./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "Mr. Trash Wheel",   
    range = cell_cols("A:N")) %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  mutate(
    sports_balls = round(sports_balls),
    sports_balls = as.integer(sports_balls)
  )
```

Read and clean precipitation data for 2018 and 2017.

``` r
precip_2018 = 
  read_xlsx(
    "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 
    sheet = "2018 Precipitation", 
    skip = 1, 
  ) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2018,
         total = as.numeric(total)) %>%
  relocate(year)

precip_2017 = 
  read_xlsx(
    "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 
    sheet = "2017 Precipitation", 
    skip = 1, 
  ) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2017) %>%
  relocate(year)
```

Now combine annual precipitation and change month number to name by
creating separate month tibble.

``` r
month_df = 
  tibble(
    month = 1:12, 
    month_name = month.name
  )

precip_df = 
  bind_rows(precip_2018, precip_2017)

left_join(precip_df, month_df, by = "month")
```

    ## # A tibble: 24 x 4
    ##     year month total month_name
    ##    <dbl> <dbl> <dbl> <chr>     
    ##  1  2018     1  0.94 January   
    ##  2  2018     2  4.8  February  
    ##  3  2018     3  2.69 March     
    ##  4  2018     4  4.69 April     
    ##  5  2018     5  9.27 May       
    ##  6  2018     6  4.77 June      
    ##  7  2018     7 10.2  July      
    ##  8  2018     8  6.45 August    
    ##  9  2018     9 10.5  September 
    ## 10  2018    10  2.12 October   
    ## # ... with 14 more rows

This dataset contains information from the Mr. Trash Wheel trash
collector in Baltimore, Maryland. As trash enters the inner harbor, the
trash wheel collects that trash and stores it in a dumpster. The dataset
contains information on year, month, and trash collected, including some
specific kinds of trash. There are a total of 14 columns and 344 rows in
our final dataset. Additional data sheets include month and
precipitation data for each year between 2014-2019.

The total precipitation in 2018 was 70.33inches.

The median number of sports balls in a dumpster in 2017 was 8 balls.

## Problem 2: NYC Transit

*Part 1: Read and clean the NYC Transit data.*

``` r
nyc_transit_df = 
  read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names() %>% 
  select(line:entry, vending, ada) %>%
  mutate(entry = recode(entry, "YES" = "TRUE", "NO" = "FALSE")) 
```

    ## Parsed with column specification:
    ## cols(
    ##   .default = col_character(),
    ##   `Station Latitude` = col_double(),
    ##   `Station Longitude` = col_double(),
    ##   Route8 = col_double(),
    ##   Route9 = col_double(),
    ##   Route10 = col_double(),
    ##   Route11 = col_double(),
    ##   ADA = col_logical(),
    ##   `Free Crossover` = col_logical(),
    ##   `Entrance Latitude` = col_double(),
    ##   `Entrance Longitude` = col_double()
    ## )

    ## See spec(...) for full column specifications.

``` r
nyc_transit_tidy = 
  nyc_transit_df %>% 
    mutate(
      route8 = as.character(route8), 
      route9 = as.character(route9),
      route10 = as.character(route10), 
      route11 = as.character(route11))

nyc_transit_tidy = 
  pivot_longer(
    nyc_transit_tidy, 
    route1:route11, 
    names_to = "route_order", 
    names_prefix = "route",
    values_to = "route")


view(nyc_transit_tidy)
```

The NYC Transit dataset contains a variety of variables pertaining to
the NYC transit system. After reading in the csv file, I cleaned the
data by first cleaning the names to make all variable names in the same
format with lowercase letters and snake case. Then, I used the select
command to retain only the variables of interest and omit all other
extraneous variables. The following variables are those of interest:
line, station, name, station latitude and longitude, routes served,
entry, entrance type, vending, and ADA compliance. Next, I converted the
“entry” variable from the original character vector into a logical
vector by using the recode function embedded in the mutate function. In
an effort to make the data more tidy, I all the route variables into
character vectors so they can be merged via pivot\_longer and all routes
are just under two columns.

The resulting dataset contains a total of 20548 observations with 20548
rows and 10 columns. The variables in the dataset are line,
station\_name, station\_latitude, station\_longitude, entrance\_type,
entry, vending, ada, route\_order, route. The data is quite tidy now.

*Part 2: Details about the data.*

Find the number of distant stations, the number of ADA compliant
stations, and the proportion of station entrances and exits without
vending that allow entrance.

``` r
distinct(nyc_transit_tidy, station_name)
```

    ## # A tibble: 356 x 1
    ##    station_name            
    ##    <chr>                   
    ##  1 25th St                 
    ##  2 36th St                 
    ##  3 45th St                 
    ##  4 53rd St                 
    ##  5 59th St                 
    ##  6 77th St                 
    ##  7 86th St                 
    ##  8 95th St                 
    ##  9 9th St                  
    ## 10 Atlantic Av-Barclays Ctr
    ## # ... with 346 more rows

## Question 3:
